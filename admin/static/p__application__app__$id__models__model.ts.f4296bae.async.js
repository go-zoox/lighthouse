(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"W/s5":function(e,t,a){"use strict";a.r(t);var r=a("d6i3"),n=a.n(r),s=a("p0pE"),c=a.n(s),p=a("gE9T"),i=a("V/h/"),u=a("LvDl"),o=a("bDt1"),d=a("sy1d"),l=o["d"].namespace;t["default"]={namespace:l,state:{},reducers:{save(e,t){var a=t.payload;return c()({},e,a)},"save/logo"(e,t){var a=t.payload;return Object(i["a"])(e,e=>{e.logo=a})}},effects:{query(e,t){return n.a.mark(function a(){var r,s,i,u;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload.id,s=t.call,i=t.put,a.next=4,s(p["delay"],300);case 4:return a.next=6,s(d["a"],{method:"GET",path:"/api/resource/applications/:id",params:{id:r}});case 6:return u=a.sent,a.next=9,i({type:"save",payload:c()({id:r},u)});case 9:case"end":return a.stop()}},a)})()},update(e,t){return n.a.mark(function a(){var r,s,c,i,o,y;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,s=t.select,c=t.call,i=t.put,a.next=4,i({type:"save",payload:r});case 4:return a.next=6,c(p["delay"],1e3);case 6:return a.next=8,s(e=>e[l]);case 8:return o=a.sent,y=o.id,a.next=12,c(d["a"],{method:"PUT",path:"/api/resource/applications/:id",params:{id:y},body:Object(u["pick"])(r,["name","homeUrl","description","redirectUri","logo","clientGrants","isSilentAuthorized","isSupportQRCodeLogin","connections"])});case 12:return a.next=14,i({type:"messages/tip/success",payload:"\u4fdd\u5b58\u6210\u529f"});case 14:case"end":return a.stop()}},a)})()},delete(e,t){return n.a.mark(function a(){var r,s,c;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload.id,t.select,s=t.call,c=t.put,a.next=4,s(p["delay"],1e3);case 4:return a.next=6,s(d["a"],{method:"DELETE",path:"/api/resource/applications/:id",params:{id:r}});case 6:return a.next=8,c({type:"menus/navigate",payload:o["a"]});case 8:return a.next=10,c({type:"messages/tip/success",payload:"\u5220\u9664\u6210\u529f"});case 10:case"end":return a.stop()}},a)})()},refresh(e,t){return n.a.mark(function e(){var a,r,s,c;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.call,a=t.select,r=t.put,e.next=3,a(e=>e[l]);case 3:return s=e.sent,c=s.id,e.next=7,r({type:"query",payload:{id:c}});case 7:case"end":return e.stop()}},e)})()},"refresh/clientSecret"(e,t){return n.a.mark(function e(){var a,r,s,c,i;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.select,r=t.call,s=t.put,e.next=3,r(p["delay"],1e3);case 3:return e.next=5,a(e=>e[l]);case 5:return c=e.sent,i=c.id,e.next=9,r(d["a"],{method:"PATCH",path:"/api/resource/applications/:id/refresh/client/secret",params:{id:i}});case 9:return e.next=11,s({type:"messages/tip/success",payload:"\u5237\u65b0\u6210\u529f"});case 11:return e.next=13,r(p["delay"],100);case 13:return e.next=15,s({type:"refresh"});case 15:case"end":return e.stop()}},e)})()},"dialog/refreshClientSecret"(e,t){return n.a.mark(function a(){var r,s,c;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.type,r=t.select,s=t.put,a.next=4,r(e=>e[l]);case 4:return c=a.sent,a.next=7,s({type:"confirms/open",payload:{attributes:{type:"modal",title:"\u662f\u5426\u91cd\u7f6e",description:"\u6b64\u884c\u4e3a\u91cd\u7f6eClient Secret\u3002\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",target:{namespace:l,effect:"refresh/clientSecret"}},datasets:c}});case 7:case"end":return a.stop()}},a)})()},"dialog/delete"(e,t){return n.a.mark(function a(){var r,s,c;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.type,r=t.select,s=t.put,a.next=4,r(e=>e[l]);case 4:return c=a.sent,a.next=7,s({type:"confirms/open",payload:{attributes:{type:"modal",title:"\u662f\u5426\u5220\u9664",description:"\u6b64\u884c\u4e3a\u4e0d\u53ef\u64a4\u9500\u3002\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",target:{namespace:l,effect:"delete"}},datasets:c}});case 7:case"end":return a.stop()}},a)})()}},subscriptions:{setup(e){var t=e.dispatch,a=e.history;a.listen(e=>{var a=e.pathname,r=doreamon.route.match(o["d"].path,a);if(r){var n=doreamon.route.parse(o["d"].path,a),s=n.id;t({type:"query",payload:{id:s}})}})}}}}}]);