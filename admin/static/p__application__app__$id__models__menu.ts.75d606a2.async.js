(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{SB3e:function(e,a,t){"use strict";t.r(a);var r=t("d6i3"),n=t.n(r),s=t("p0pE"),c=t.n(s),p=t("bDt1"),u=t("gE9T"),o=t("sy1d"),d=t("jnKW"),i=p["d"].namespace;a["default"]={namespace:p["c"],state:{attributes:{},loading:!1,dataSource:[]},reducers:{save(e,a){var t=a.payload;return c()({},e,t)},"save/loading"(e,a){var t=a.payload;return c()({},e,{loading:t})},"save/reorder"(e,a){var t=a.payload;return c()({},e,{dataSource:t})}},effects:{query(e,a){return n.a.mark(function e(){var t,r,s,c,p,u;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.select,r=a.call,s=a.put,e.next=3,t(e=>e[i].id);case 3:return c=e.sent,e.next=6,r(o["a"],{method:"GET",path:"/api/resource/applications/:id/menus",params:{id:c}});case 6:return p=e.sent,u=Object(d["create"])("flat",p).nest,console.log(u),e.next=11,s({type:"save",payload:{dataSource:u}});case 11:case"end":return e.stop()}},e)})()},create(e,a){return n.a.mark(function t(){var r,s,c,p,d;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=a.select,c=a.call,p=a.put,t.next=4,p({type:"save/loading",payload:!0});case 4:return t.next=6,s(e=>e[i].id);case 6:return d=t.sent,t.next=9,c(o["a"],{method:"POST",path:"/api/resource/applications/:id/menus",params:{id:d},body:r});case 9:return t.next=11,c(u["delay"],1e3);case 11:return t.next=13,p({type:"query"});case 13:return t.next=15,p({type:"save/loading",payload:!1});case 15:return t.next=17,p({type:"message/notice/success",payload:"\u521b\u5efa\u6210\u529f"});case 17:case"end":return t.stop()}},t)})()},update(e,a){return n.a.mark(function t(){var r,s,c,p,d;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=a.select,c=a.call,p=a.put,t.next=4,p({type:"save/loading",payload:!0});case 4:return t.next=6,s(e=>e[i].id);case 6:return d=t.sent,t.next=9,c(o["a"],{method:"PUT",path:"/api/resource/applications/:id/menus/:mid",params:{id:d,mid:r._id},body:r});case 9:return t.next=11,c(u["delay"],1e3);case 11:return t.next=13,p({type:"query"});case 13:return t.next=15,p({type:"save/loading",payload:!1});case 15:return t.next=17,p({type:"message/notice/success",payload:"\u4fdd\u5b58\u6210\u529f"});case 17:case"end":return t.stop()}},t)})()},delete(e,a){return n.a.mark(function t(){var r,s,c,p,d;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=a.select,c=a.call,p=a.put,t.next=4,s(e=>e[i].id);case 4:return d=t.sent,t.next=7,c(o["a"],{method:"DELETE",path:"/api/resource/applications/:id/menus/:mid",params:{id:d,mid:r}});case 7:return t.next=9,c(u["delay"],1e3);case 9:return t.next=11,p({type:"query"});case 11:return t.next=13,p({type:"message/notice/success",payload:"\u5220\u9664\u6210\u529f"});case 13:case"end":return t.stop()}},t)})()},reorder(e,a){return n.a.mark(function t(){var r,s,c,p,u,d;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=a.select,c=a.call,p=a.put,r.nest,u=r.flat,t.next=5,s(e=>e[i].id);case 5:return d=t.sent,t.next=8,c(o["a"],{method:"POST",path:"/api/resource/applications/:id/menus/reorder",params:{id:d},body:{orders:u.map(e=>({name:e.name,path:e.path,order:e.sort,id:e._id}))}});case 8:return t.next=10,p({type:"query"});case 10:case"end":return t.stop()}},t)})()},"open/remove/dialog"(e,a){return n.a.mark(function t(){var r,s,c;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=r.menuId,r.name,c=a.put,t.next=4,c({type:"confirms/open",payload:{attributes:{type:"modal",title:"\u662f\u5426\u5220\u9664",description:"\u6b64\u884c\u4e3a\u4e0d\u53ef\u64a4\u9500\u3002\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",target:{namespace:p["c"],effect:"delete"}},datasets:s}});case 4:case"end":return t.stop()}},t)})()}}}}}]);