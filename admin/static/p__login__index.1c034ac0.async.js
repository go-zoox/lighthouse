(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{"2hfb":function(e,a,t){e.exports={"pages-login":"pages-login___336eI","pages-login__logo":"pages-login__logo___1Er67","pages-login__image":"pages-login__image___2hR5y","pages-login__text":"pages-login__text___1unAx","pages-login__form":"pages-login__form___1BvMO","pages-login__prefix":"pages-login__prefix___14QoO","pages-login__captcha":"pages-login__captcha___25aKZ","pages-login__submitBtn":"pages-login__submitBtn___P4d5v","pages-login__connection":"pages-login__connection___kToMf"}},A8du:function(e,a,t){"use strict";t.r(a);t("+L6B");var s=t("2/Rp"),r=(t("jCWc"),t("kPKH")),n=(t("14J3"),t("BMrR")),o=(t("5NDa"),t("5rEg")),i=t("d6i3"),l=t.n(i),p=t("1l/V"),c=t.n(p),g=t("mrSG"),m=t("q1tI"),_=t.n(m),h=t("/MKj"),d=t("3NWV"),u=t("WsrF"),E=t("ZFw/"),f=t.n(E),w=(t("2hfb"),e=>{var a=e.applications,t=e.authorizations,s=e.loading;return{site:a.site,captchImage:t.captcha,loading:s.models.authorizations}}),v=e=>({login:(a,t)=>e({type:"authorizations/login",payload:a,done:t}),refreshCaptcha:()=>e({type:"authorizations/refresh/captcha"}),parseLoginError:()=>e({type:"messages/url/error"})}),y=class extends m["Component"]{constructor(){var e;super(...arguments),e=this,this.state={autoLogin:!1},this.onPressEnter=(e=>{"Enter"===e.key&&this.onSubmit()}),this.onError=c()(l.a.mark(function a(){return l.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.props.parseLoginError();case 1:case"end":return a.stop()}},a)})),this.onValidate=(()=>this.props.form.validateFieldsAndScroll((e,a)=>{if(e)return!1})),this.onSubmit=(()=>this.props.form.validateFieldsAndScroll((e,a)=>{if(e)return!1;this.props.login(a,()=>{var e;null===(e=this.props.form)||void 0===e||e.setFieldsValue({captcha:""})})})),this.onRefreshCaptcha=(()=>{var e;null===(e=this.props.form)||void 0===e||e.setFieldsValue({captcha:""}),this.props.refreshCaptcha()}),this.renderUsernameField=(()=>{var e=this.props.form.getFieldDecorator;return e("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d/\u90ae\u7bb1"}]})(_.a.createElement(o["a"],{size:"large",placeholder:"\u90ae\u7bb1/\u7528\u6237\u540d",prefix:_.a.createElement(d["a"],{className:"pages-login__prefix",type:"user"}),onPressEnter:this.onValidate,autoComplete:"username"}))}),this.renderPasswordField=(()=>{var e=this.props.form.getFieldDecorator;return e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(_.a.createElement(o["a"],{size:"large",type:"password",placeholder:"\u5bc6\u7801",prefix:_.a.createElement(d["a"],{className:"pages-login__prefix",type:"lock"}),onPressEnter:this.onValidate,autoComplete:"current-password"}))}),this.renderCaptcha=(()=>{var e=this.props.captchImage,a=this.props.form.getFieldDecorator,t=a("captcha",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}]})(_.a.createElement(o["a"],{className:"pages-login__captcha",size:"large",type:"captcha",placeholder:"\u9a8c\u8bc1\u7801",prefix:_.a.createElement(d["a"],{className:"pages-login__prefix",type:"safety"}),onPressEnter:this.onValidate,allowClear:!0,maxLength:4,autoComplete:"off"}));return _.a.createElement(n["a"],{gutter:8},_.a.createElement(r["a"],{span:16},t),_.a.createElement(r["a"],{span:8},_.a.createElement("img",{className:"pages-login__captcha",src:e,onClick:this.onRefreshCaptcha})))})}componentDidMount(){window.addEventListener("keydown",this.onPressEnter),this.onError()}componentWillUnmount(){window.removeEventListener("keydown",this.onPressEnter)}render(){var e=this.props,a=e.site,t=e.loading,r=(this.state.autoLogin,"\u767b\u5f55 - ".concat(a.name));return _.a.createElement("div",{className:"doreamonjs pages-login"},_.a.createElement(f.a,{title:r}),_.a.createElement("div",{className:"pages-login__logo"},a.logo&&_.a.createElement("img",{className:"pages-login__image",alt:"",src:a.logo}),_.a.createElement("span",{className:"pages-login__text"},a.name)),_.a.createElement(u["a"],{className:"pages-login__form"},_.a.createElement(u["a"].Item,{hasFeedback:!0},this.renderUsernameField()),_.a.createElement(u["a"].Item,{hasFeedback:!0},this.renderPasswordField()),_.a.createElement(u["a"].Item,null,this.renderCaptcha()),_.a.createElement(u["a"].Item,null,_.a.createElement(s["a"],{className:"pages-login__submitBtn",size:"large",type:"primary",onClick:this.onSubmit,loading:t},"\u767b\u5f55")),_.a.createElement("div",null,"\u5176\u4ed6\u767b\u9646\u65b9\u5f0f",_.a.createElement(d["a"],{className:"pages-login__connection",type:"github"}),_.a.createElement(d["a"],{className:"pages-login__connection",type:"weibo"}),_.a.createElement(d["a"],{className:"pages-login__connection",type:"wechat"}))))}};y.displayName="LoginPage",y.defaultProps={loading:!1},y=Object(g["a"])([Object(h["c"])(w,v),u["a"].create()],y),a["default"]=y}}]);