(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[69],{PpKg:function(e,a,t){"use strict";t.r(a);var r=t("d6i3"),n=t.n(r),s=t("p0pE"),u=t.n(s),p=t("gE9T"),i=t("f89e"),c=t("19zf"),l=t("CLrh"),o=t("vdH4");a["default"]={namespace:i["a"],state:{attributes:{submitText:"\u66f4\u65b0\u57fa\u7840\u4fe1\u606f",layout:"vertical",fields:[{title:"\u90ae\u7bb1",dataIndex:"email",type:"input",placeholder:"\u90ae\u7bb1",disabled:!0,rules:[{type:"email",required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1"}]},{title:"\u6635\u79f0",dataIndex:"nickname",type:"input",placeholder:"\u6635\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0"}]},{title:"\u4e2a\u4eba\u7b80\u4ecb",dataIndex:"description",type:"textarea",placeholder:"\u4e2a\u4eba\u7b80\u4ecb..."},{title:"\u56fd\u5bb6/\u5730\u533a",dataIndex:"country",type:"select",initialValue:"China",options:[{title:"\u4e2d\u56fd",value:"China"},{title:"\u7f8e\u56fd",value:"America"}]},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"telphone",type:"input",placeholder:"\u8054\u7cfb\u7535\u8bdd"}]},values:{avatar:"https://avatars1.githubusercontent.com/u/7463687?s=460&v=4",email:"antdesign@alipay.com",nickname:"Serati Ma",country:"China",telphone:"15000834842"}},reducers:{save(e,a){var t=a.payload;return u()({},e,{values:u()({},e.values,t)})},"avatar/update"(e,a){var t=a.payload;return u()({},e,{values:u()({},e.values,{avatar:t})})}},effects:{query(e,a){return n.a.mark(function e(){var t,r,s,u,i,c;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.call,r=a.race,s=a.put,e.next=3,t(p["delay"],1e3);case 3:return e.next=5,r({user:t(l["f"].get),timeout:t(p["delay"],1e4)});case 5:if(u=e.sent,i=u.user,c=u.timeout,!c){e.next=12;break}return e.next=11,s({type:"message/notice/error",payload:"\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u5566"});case 11:return e.abrupt("return",!1);case 12:return e.next=14,s({type:"save",payload:i});case 14:case"end":return e.stop()}},e)})()},update(e,a){return n.a.mark(function t(){var r,s,c,o,d,y,v,m,x,h,f;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=r.values,r.lastValues,c=a.select,o=a.race,d=a.call,y=a.put,t.next=4,d(p["delay"],1e3);case 4:return t.next=6,c(e=>e[i["a"]].values);case 6:return v=t.sent,m=v.avatar,x=u()({avatar:m},s),t.next=11,o({user:d(l["f"].update,x),timeout:d(p["delay"],1e4)});case 11:if(h=t.sent,f=h.timeout,!f){t.next=17;break}return t.next=16,y({type:"message/notice/error",payload:"\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u5566"});case 16:return t.abrupt("return",!1);case 17:return t.next=19,y({type:"message/notice/success",payload:"\u57fa\u672c\u8bbe\u7f6e\u66f4\u65b0\u6210\u529f"});case 19:return t.next=21,y({type:"save",payload:x});case 21:return t.next=23,y({type:"user/save",payload:x});case 23:case"end":return t.stop()}},t)})()},"avatar/change"(e,a){return n.a.mark(function t(){var r,s;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.payload,s=a.put,t.next=4,s({type:"avatar/update",payload:r});case 4:case"end":return t.stop()}},t)})()}},subscriptions:{setup(e){var a=e.history,t=e.dispatch;a.listen(e=>{var a=e.pathname,r=Object(o["a"])(i["b"],a);r&&(t({type:"".concat(c["a"],"/inform/query"),payload:i["a"]}),t({type:"query"}))})}}}}}]);