(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{h7aW:function(e,t,a){"use strict";a.r(t);var r=a("d6i3"),n=a.n(r),s=a("bDt1"),c=a("gE9T"),i=a("V/h/"),p=a("sy1d"),d=s["d"].namespace;t["default"]={namespace:s["b"],state:{visible:{create:!1},attributes:{actions:[{key:"create",type:"single",title:"\u65b0\u589e",buttonType:"primary",direction:"right"},{key:"search",type:"single",title:"\u67e5\u8be2",direction:"right"},{key:"update",type:"item",title:"\u7f16\u8f91",buttonType:"primary"},{key:"enable",type:"item",title:e=>e.enable?"\u7981\u7528":"\u542f\u7528",buttonType:e=>e.enable?"danger":"default",effectType:"service"}],columns:[{title:"\u5e8f\u53f7",dataIndex:"id",formatter(e){var t=e.index;return t}},{title:"\u529f\u80fd\u540d\u79f0",dataIndex:"name"},{title:"\u529f\u80fd\u6807\u8bc6",dataIndex:"code"},{title:"\u529f\u80fd\u63cf\u8ff0",dataIndex:"description"}],pagination:{current:1,pageSize:10,total:1}},datasets:{dataSource:[{id:1,name:"\u521b\u5efa\u7528\u6237",code:"ROLE_ADMIN"},{id:2,name:"\u5220\u9664\u7528\u6237",code:"ROLE_ADMIN"}]}},reducers:{save(e,t){var a=t.payload;return a}},effects:{dispatcher(e,t){return n.a.mark(function a(){var r,s,c,i,p,d,o,u,l;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.payload,s=t.put,c=r||{},i=c.meta,p=void 0===i?{}:i,d=c.data,o=void 0===d?{}:d,u=p.effectType,l=void 0===u?"dialog":u,!p.effect){a.next=9;break}return a.next=7,s({type:p.effect,payload:o});case 7:a.next=11;break;case 9:return a.next=11,s({type:"".concat(l,"/").concat(p.key),payload:o});case 11:case"end":return a.stop()}},a)})()},"dialog/create"(e,t){return n.a.mark(function e(){var a;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.put,e.next=3,a({type:"forms/open",payload:{attributes:{type:"modal",title:"\u65b0\u589e",layout:"horizontal",fields:[{title:"\u540d\u79f0",dataIndex:"name",type:"text",placeholder:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]},{title:"\u6807\u8bc6",dataIndex:"code",type:"text",placeholder:"\u6807\u8bc6",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u8bc6"}]},{title:"\u63cf\u8ff0",dataIndex:"description",type:"textarea",placeholder:"\u63cf\u8ff0..."}],target:{namespace:s["b"],effect:"service/create"}},datasets:{}}});case 3:case"end":return e.stop()}},e)})()},"dialog/update"(e,t){return n.a.mark(function a(){var r,c;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload.record,c=t.put,a.next=4,c({type:"forms/open",payload:{attributes:{type:"modal",title:"\u7f16\u8f91",layout:"horizontal",fields:[{title:"\u6807\u8bc6",dataIndex:"code",type:"text",placeholder:"\u6807\u8bc6",disabled:!0},{title:"\u540d\u79f0",dataIndex:"name",type:"text",placeholder:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u8bc6"}]},{title:"\u662f\u5426\u542f\u7528",dataIndex:"enable",type:"switch",initialValue:!1},{title:"\u63cf\u8ff0",dataIndex:"description",type:"textarea",placeholder:"\u63cf\u8ff0..."}],target:{namespace:s["b"],effect:"service/update"}},datasets:r}});case 4:case"end":return a.stop()}},a)})()},"dialog/delete"(e,t){return n.a.mark(function a(){var r,c;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload.record,c=t.put,a.next=4,c({type:"confirms/open",payload:{attributes:{type:"modal",title:"\u5220\u9664\u529f\u80fd",description:"\u6b64\u884c\u4e3a\u5c06\u5220\u9664\u529f\u80fd\u3002\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",target:{namespace:s["b"],effect:"service/delete"}},datasets:r}});case 4:case"end":return a.stop()}},a)})()},"open/dialog"(e,t){return n.a.mark(function a(){var r,c,p,d;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,c=t.select,t.call,p=t.put,a.next=4,c(e=>e[s["b"]]);case 4:return d=a.sent,a.next=7,p({type:"save",payload:Object(i["a"])(d,e=>{e.visible[r]=!0})});case 7:case"end":return a.stop()}},a)})()},"close/dialog"(e,t){return n.a.mark(function a(){var r,c,p,d;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,c=t.select,t.call,p=t.put,a.next=4,c(e=>e[s["b"]]);case 4:return d=a.sent,a.next=7,p({type:"save",payload:Object(i["a"])(d,e=>{e.visible[r]=!1})});case 7:case"end":return a.stop()}},a)})()},"service/query"(e,t){return n.a.mark(function e(){var a,r,c,o,u,l,y,x;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.select,r=t.call,c=t.put,e.next=3,a(e=>e[d].id);case 3:return o=e.sent,e.next=6,a(e=>e[s["b"]]);case 6:return u=e.sent,e.next=9,r(p["a"],{method:"GET",path:"/api/resource/applications/:id/functions",params:{id:o}});case 9:return l=e.sent,y=l.total,x=l.data,e.next=14,c({type:"save",payload:Object(i["a"])(u,e=>{e.attributes.pagination.total=y,e.datasets.dataSource=x})});case 14:case"end":return e.stop()}},e)})()},"service/create"(e,t){return n.a.mark(function a(){var r,s,i,o,u;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,s=t.select,i=t.call,o=t.put,a.next=4,o({type:"save/loading",payload:!0});case 4:return a.next=6,s(e=>e[d].id);case 6:return u=a.sent,a.next=9,i(p["a"],{method:"POST",path:"/api/resource/applications/:id/functions",params:{id:u},body:r});case 9:return a.next=11,i(c["delay"],1e3);case 11:return a.next=13,o({type:"service/query"});case 13:return a.next=15,o({type:"save/loading",payload:!1});case 15:return a.next=17,o({type:"message/tip/success",payload:"\u65b0\u589e\u6210\u529f"});case 17:case"end":return a.stop()}},a)})()},"service/update"(e,t){return n.a.mark(function a(){var r,s,i,o,u;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,s=t.select,i=t.call,o=t.put,a.next=4,o({type:"save/loading",payload:!0});case 4:return a.next=6,s(e=>e[d].id);case 6:return u=a.sent,a.next=9,i(p["a"],{method:"PUT",path:"/api/resource/applications/:id/functions/:pid",params:{id:u,pid:r._id},body:r});case 9:return a.next=11,i(c["delay"],1e3);case 11:return a.next=13,o({type:"service/query"});case 13:return a.next=15,o({type:"save/loading",payload:!1});case 15:return a.next=17,o({type:"messages/tip/success",payload:"\u66f4\u65b0\u6210\u529f"});case 17:case"end":return a.stop()}},a)})()},"service/enable"(e,t){return n.a.mark(function a(){var r,s,i,o,u;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,s=t.select,i=t.call,o=t.put,a.next=4,o({type:"save/loading",payload:!0});case 4:return a.next=6,s(e=>e[d].id);case 6:return u=a.sent,a.next=9,i(p["a"],{method:"PUT",path:"/api/resource/applications/:id/functions/:pid",params:{id:u,pid:r.record._id},body:{enable:!r.record.enable}});case 9:return a.next=11,i(c["delay"],1e3);case 11:return a.next=13,o({type:"service/query"});case 13:return a.next=15,o({type:"save/loading",payload:!1});case 15:return a.next=17,o({type:"messages/tip/success",payload:"\u64cd\u4f5c\u6210\u529f"});case 17:case"end":return a.stop()}},a)})()},"service/delete"(e,t){return n.a.mark(function a(){var r,s,i,o,u;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,s=t.select,i=t.call,o=t.put,a.next=4,s(e=>e[d].id);case 4:return u=a.sent,a.next=7,i(p["a"],{method:"DELETE",path:"/api/resource/applications/:id/functions/:pid",params:{id:u,pid:r._id}});case 7:return a.next=9,i(c["delay"],1e3);case 9:return a.next=11,o({type:"service/query"});case 11:return a.next=13,o({type:"messages/tip/success",payload:"\u5220\u9664\u6210\u529f"});case 13:case"end":return a.stop()}},a)})()},"open/remove/dialog"(e,t){return n.a.mark(function a(){var r,c,i;return n.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return r=e.payload,c=r.menuId,r.name,i=t.put,a.next=4,i({type:"confirms/open",payload:{attributes:{type:"modal",title:"\u662f\u5426\u5220\u9664",description:"\u6b64\u884c\u4e3a\u4e0d\u53ef\u64a4\u9500\u3002\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",target:{namespace:s["b"],effect:"delete"}},datasets:c}});case 4:case"end":return a.stop()}},a)})()}}}}}]);